const express=require('express');
const router=express.Router();
const Student=require('./../models/Student');

//signup route
router.post('/signup',async(req,res)=>{
    try{
      const data=req.body;// extracting data fron the request
      const newStudent= Student(data);//creating new object and storing data in that
      await newStudent.save();// saving new data


      res.status(200).json({message: 'User register successfully'});
  
    }
   catch(err){
    console.log(err);
    res.status(400).json({error:'Internal Server Error'});
   }
  })

  //login route
  router.post('/login',async(req,res)=>{
    try{
      //extract username password from the body
      const {username,password}=req.body;

      //find the user by username
      const user =await Student.findOne({username: username});

      //if user does not exist or password does not match, return error
      if(!user || user.password!==password){
        return res.status(401).json({error: 'Invalid username or password'});
      }

      res.status(200).json({message: 'user logged in successfully'});
  
    }
   catch(err){
    console.log(err);
    res.status(400).json({error:'Internal Server Error'});
   }
  })

  //view profile routes
  router.get('/profile',async(req,res)=>{

  })

  module.exports=router;